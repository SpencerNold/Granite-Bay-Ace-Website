<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location</title>
    <link rel="stylesheet" href="locations.css">
</head>
<script>
    document.addEventListener('DOMContentLoaded', () => initMoreCards());           //Add event listener to initialize the "more cards" once the DOM content is loaded
    function initMoreCards(root = document) {
        root.querySelectorAll('.more-card').forEach(details => {
            if (details.__moreInit) return;
            details.__moreInit = true;

            const content = details.querySelector('.more-content');
            if (!content) return;

            // Store the current transitionend handler so we can remove it when toggling again
            let currentTransitionHandler = null;

            details.addEventListener('toggle', () => {
                // remove any previous handler to avoid duplicate side effects
                if (currentTransitionHandler) {
                    content.removeEventListener('transitionend', currentTransitionHandler);
                    currentTransitionHandler = null;
                }

                if (details.open) {
                    // OPENING: set numeric maxHeight so transition runs, then allow natural height
                    content.style.maxHeight = content.scrollHeight + 'px';
                    content.style.opacity = '1';            //Fade in the content by setting opacity to 1 when opening

                    currentTransitionHandler = (ev) => {
                        // wait specifically for max-height end and ensure details is still open
                        if (ev.propertyName !== 'max-height') return;           // ignore opacity transition
                        if (details.open) {
                            content.style.maxHeight = 'none'; // allow content to resize naturally
                        }

                        // cleanup this handler since it's no longer needed until the next toggle
                        content.removeEventListener('transitionend', currentTransitionHandler);
                        currentTransitionHandler = null;
                    };
                    content.addEventListener('transitionend', currentTransitionHandler);
                } else {
                    // CLOSING: if currently maxHeight is 'none', set it to measured px height first,
                    // force reflow, then collapse to 0 so animation runs every time.
                    if (getComputedStyle(content).maxHeight === 'none') {
                        content.style.maxHeight = content.scrollHeight + 'px';
                    } else {
                        // make sure we start from the latest size
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                    // force reflow so browser notices the starting value
                    void content.offsetHeight;
                    content.style.maxHeight = '0px';
                    content.style.opacity = '0';
                }
            });
        });
    }
</script>

<body>

    <div class="locations-header"> Locations </div> <!-- header -->

    <!-- wrapper -->
    <div class="locations-container">
        <!-- store  1 -->
        <div class="location-box">

            <img class="store-photo" src="../images/granite.jpg" alt="Granite Bay">

            <details class="more-card">
                <summary>Explore</summary> <!-- identifier/label -->
                <!-- text that displays when clicked -->
                <div class="more-content">
                    <p><u><strong>Granite Bay ACE</strong></u><br>
                        8665 Auburn Folsom Rd. <br>
                        Granite Bay, CA 95746</p>

                    <p><u><strong>Store Hours</strong></u><br>
                        Mon - Fri: 8:00am - 7:00pm<br>
                        Sat: 8:00am - 7:00pm<br>
                        Sun: 8:00am - 6:00pm<br></p>

                    <p><u><strong>Phone:</strong></u> (916) 797-3993<br></p>
                    <p><u><strong>Email:</strong></u> <a
                            href="mailto:granitebayace@yahoo.com">granitebayace@yahoo.com</a></p>
                    <p><u><strong>Corporate:</strong></u> <a
                            href="https://www.acehardware.com/store-details/11720">Granite Bay ACE Hardware Store
                            Details</a></p>
                </div>
            </details>
        </div>

        <!-- store  2 -->
        <div class="location-box">

            <img class="store-photo" src="../images/pine.jpg" alt="Lake of the Pines">

            <details class="more-card">
                <summary>Explore</summary> <!-- identifier/label -->
                <!-- text that displays when clicked -->
                <div class="more-content">
                    <p><u><strong>Lake of the Pines ACE</strong></u><br>
                        8665 Auburn Folsom Rd. <br>
                        Granite Bay, CA 95746</p>

                    <p><u><strong>Store Hours</strong></u><br>
                        Mon - Fri: 8:00am - 7:00pm<br>
                        Sat: 8:00am - 7:00pm<br>
                        Sun: 8:00am - 6:00pm<br></p>

                    <p><u><strong>Phone:</strong></u> (916) 797-3993<br></p>
                    <p><u><strong>Email:</strong></u> <a
                            href="mailto:granitebayace@yahoo.com">granitebayace@yahoo.com</a></p>
                    <p><u><strong>Corporate:</strong></u> <a href="https://www.acehardware.com/store-details/10206">Lake
                            of the Pines ACE Hardware Store Details</a></p>
                </div>
            </details>
        </div>

        <!-- store  3 -->
        <div class="location-box">

            <img class="store-photo" src="../images/capitol.jpg" alt="Capitol">

            <details class="more-card">
                <summary>Explore</summary> <!-- identifier/label -->
                <!-- text that displays when clicked -->
                <div class="more-content">
                    <p><u><strong>Capitol ACE</strong></u><br>
                        8665 Auburn Folsom Rd. <br>
                        Granite Bay, CA 95746</p>

                    <p><u><strong>Store Hours</strong></u><br>
                        Mon - Fri: 8:00am - 7:00pm<br>
                        Sat: 8:00am - 7:00pm<br>
                        Sun: 8:00am - 6:00pm<br></p>

                    <p><u><strong>Phone:</strong></u> (916) 797-3993<br></p>
                    <p><u><strong>Email:</strong></u> <a
                            href="mailto:granitebayace@yahoo.com">granitebayace@yahoo.com</a></p>
                    <p><u></u><strong>Corporate:</strong> <a
                            href="https://www.acehardware.com/store-details/17614">Capitol ACE Hardware Store
                            Details</a></p>
                </div>
            </details>
        </div>

        <!-- store  4 -->
        <div class="location-box">

            <img class="store-photo" src="../images/east.jpg" alt="East Sac">

            <details class="more-card">
                <summary>Explore</summary> <!-- identifier/label -->
                <!-- text that displays when clicked -->
                <div class="more-content">
                    <p><u><strong>East Sac ACE</strong></u><br>
                        8665 Auburn Folsom Rd. <br>
                        Granite Bay, CA 95746</p>

                    <p><u><strong>Store Hours</strong></u> <br>
                        Mon - Fri: 8:00am - 7:00pm<br>
                        Sat: 8:00am - 7:00pm<br>
                        Sun: 8:00am - 6:00pm<br></p>

                    <p><u><strong>Phone:</strong></u> (916) 797-3993<br></p>
                    <p><u><strong>Email:</strong></u> <a
                            href="mailto:granitebayace@yahoo.com">granitebayace@yahoo.com</a></p>
                    <p><u><strong>Corporate:</strong></u> <a href="https://www.acehardware.com/store-details/18150">East
                            Sac ACE Hardware Store Details</a></p>
                </div>
            </details>
        </div>

    </div>


    <script src="/import.js"></script>
</body>

</html>